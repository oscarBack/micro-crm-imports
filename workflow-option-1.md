# Spec-Driven Development Workflow: Option 1

This document outlines the step-by-step process for building the project using a strict "Spec-First" pipeline. This approach ensures all requirements are formalized before any code is written, utilizing OpenSpec, Engram, Agent-Teams-Lite, and Gentleman Guardian Angel (gga).

## Prerequisites

Ensure you have the following tools installed and accessible in your environment:
*   [OpenSpec](https://github.com/Fission-AI/OpenSpec)
*   [Engram](https://github.com/Gentleman-Programming/engram)
*   [Agent-Teams-Lite](https://github.com/Gentleman-Programming/agent-teams-lite)
*   [Gentleman Guardian Angel (gga)](https://github.com/Gentleman-Programming/gentleman-guardian-angel)

## Step 1: Formalize the PRD with OpenSpec (The Translator)

Your current PRD is a draft. We need to convert it into a strict, machine-readable specification.

1.  **Locate your Draft PRD:** Ensure your draft PRD is saved in the workspace (e.g., `draft-prd.md`).
2.  **Run OpenSpec:** Use OpenSpec to analyze the draft and generate a formal specification document.
    ```bash
    # Example command (adjust based on OpenSpec's actual CLI usage)
    openspec generate --input draft-prd.md --output spec.md
    ```
3.  **Review the Spec:** Carefully review the generated `spec.md`. This document is now the absolute source of truth for the project.

## Step 2: Initialize the Memory Bank with Engram (The Memory)

We need to provide our AI agents with persistent context so they understand the project's architecture and rules across different sessions.

1.  **Start Engram:** Initialize the Engram memory system in your workspace.
    ```bash
    # Example command (adjust based on Engram's actual CLI usage)
    engram init
    ```
2.  **Load the Context:** Feed the formal specification (`spec.md`) and any architectural guidelines into Engram.
    ```bash
    # Example command
    engram ingest spec.md
    ```

## Step 3: Define Iteration Scope (Incremental Delivery)

Instead of building the entire PRD at once, slice the specification into manageable milestones. This ensures incremental delivery and prevents the agents from failing on massive, context-heavy generations.

1.  **Extract Scope:** Identify the specific baseline features or sub-features from `spec.md` needed for the current sprint.
2.  **Create Iteration Spec:** Create a targeted specification file just for this cycle (e.g., `iteration-1-scope.md`).
3.  **Update Memory:** Log the specific goal of this iteration in Engram so the sub-agents understand their immediate boundaries.

## Step 4: Scaffold and Build with Agent-Teams-Lite (The Workforce)

Now we unleash the specialized sub-agents to read the iteration spec and write the code.

1.  **Configure the Orchestrator:** Point `agent-teams-lite` at your *iteration* specification, ensuring it queries Engram for the broader context.
2.  **Execute the Build:** Run the orchestrator to build the features based on `iteration-1-scope.md`.
    ```bash
    # Example command (adjust based on Agent-Teams-Lite's actual CLI usage)
    agent-teams-lite run --spec iteration-1-scope.md
    ```
3.  **Monitor Progress:** The orchestrator will delegate tasks to its sub-agents (e.g., routing backend tasks to a backend agent, frontend tasks to a frontend agent).

## Step 5: Enforce Quality with Guardian Angel (The Gatekeeper)

Before finalizing any code generated by the agents, it must pass a strict review against your coding standards.

1.  **Configure Rules:** Ensure `gga` is configured with your project's specific coding standards and architectural rules (these can also be stored in Engram).
2.  **Run the Review:** Execute `gga` to review the newly generated codebase.
    ```bash
    # Example command (adjust based on gga's actual CLI usage)
    gga review .
    ```
3.  **Iterate:** If `gga` finds violations, feed the feedback back into `agent-teams-lite` to correct the code. Repeat this process until `gga` approves the implementation.

## Summary

1.  `draft-prd.md` -> **OpenSpec** -> `spec.md`
2.  `spec.md` -> **Engram** -> (Persistent Context)
3.  `spec.md` -> (Slice into chunks) -> `iteration-1-scope.md`
4.  `iteration-1-scope.md` + Engram -> **Agent-Teams-Lite** -> (Generated Code)
5.  (Generated Code) -> **Guardian Angel** -> (Production-Ready Code)
